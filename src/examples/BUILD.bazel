load("//tools:nasm.bzl", "nasm_binary")
load("//tools:test_helpers.bzl", "test_return_code")

nasm_binary(
    name = "tiny",
    src = "tiny.asm",
)

test_return_code("tiny-test", 42, "tiny")

cc_binary(
    name = "teensy-creator",
    srcs = ["teensy.cc"],
)

genrule(
    name = "teensy-bin",
    srcs = ["teensy-creator"],
    outs = ["teensy"],
    cmd = "$(location :teensy-creator) $@",
)

test_return_code("teensy-test", 42, "teensy-bin")
